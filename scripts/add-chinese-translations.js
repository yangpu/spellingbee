import fs from 'fs';
import { fileURLToPath } from 'url';
import { dirname, join } from 'path';

const __filename = fileURLToPath(import.meta.url);
const __dirname = dirname(__filename);

// 三年级常用词汇中文翻译表
const translations = {
  // 基础词汇
  'park': '公园',
  'game': '游戏；比赛',
  'kick': '踢',
  'sheep': '绵羊',
  'choose': '选择',
  'school': '学校',
  'teacher': '老师',
  'student': '学生',
  'book': '书',
  'read': '阅读',
  'write': '写',
  'pen': '钢笔',
  'pencil': '铅笔',
  'desk': '书桌',
  'chair': '椅子',
  'table': '桌子',
  'door': '门',
  'window': '窗户',
  'wall': '墙',
  'floor': '地板',
  'room': '房间',
  'house': '房子',
  'home': '家',
  'family': '家庭',
  'father': '父亲',
  'mother': '母亲',
  'brother': '兄弟',
  'sister': '姐妹',
  'friend': '朋友',
  'boy': '男孩',
  'girl': '女孩',
  'man': '男人',
  'woman': '女人',
  'child': '孩子',
  'children': '孩子们',
  'people': '人们',
  'name': '名字',
  'age': '年龄',
  'birthday': '生日',
  'year': '年',
  'month': '月',
  'week': '周',
  'day': '天',
  'today': '今天',
  'tomorrow': '明天',
  'yesterday': '昨天',
  'morning': '早晨',
  'afternoon': '下午',
  'evening': '傍晚',
  'night': '夜晚',
  'time': '时间',
  'hour': '小时',
  'minute': '分钟',
  'second': '秒',
  'clock': '时钟',
  'watch': '手表；观看',
  'sun': '太阳',
  'moon': '月亮',
  'star': '星星',
  'sky': '天空',
  'cloud': '云',
  'rain': '雨',
  'snow': '雪',
  'wind': '风',
  'weather': '天气',
  'hot': '热的',
  'cold': '冷的',
  'warm': '温暖的',
  'cool': '凉爽的',
  'spring': '春天',
  'summer': '夏天',
  'autumn': '秋天',
  'fall': '秋天；落下',
  'winter': '冬天',
  'season': '季节',
  'water': '水',
  'fire': '火',
  'air': '空气',
  'earth': '地球；土地',
  'tree': '树',
  'flower': '花',
  'grass': '草',
  'plant': '植物',
  'animal': '动物',
  'dog': '狗',
  'cat': '猫',
  'bird': '鸟',
  'fish': '鱼',
  'horse': '马',
  'cow': '牛',
  'pig': '猪',
  'chicken': '鸡',
  'duck': '鸭',
  'rabbit': '兔子',
  'mouse': '老鼠',
  'elephant': '大象',
  'lion': '狮子',
  'tiger': '老虎',
  'bear': '熊',
  'monkey': '猴子',
  'snake': '蛇',
  'frog': '青蛙',
  'food': '食物',
  'eat': '吃',
  'drink': '喝',
  'breakfast': '早餐',
  'lunch': '午餐',
  'dinner': '晚餐',
  'rice': '米饭',
  'bread': '面包',
  'meat': '肉',
  'egg': '鸡蛋',
  'milk': '牛奶',
  'fruit': '水果',
  'apple': '苹果',
  'orange': '橙子',
  'banana': '香蕉',
  'grape': '葡萄',
  'vegetable': '蔬菜',
  'cake': '蛋糕',
  'candy': '糖果',
  'ice': '冰',
  'cream': '奶油',
  'color': '颜色',
  'red': '红色',
  'blue': '蓝色',
  'green': '绿色',
  'yellow': '黄色',
  'white': '白色',
  'black': '黑色',
  'pink': '粉色',
  'purple': '紫色',
  'brown': '棕色',
  'gray': '灰色',
  'number': '数字',
  'one': '一',
  'two': '二',
  'three': '三',
  'four': '四',
  'five': '五',
  'six': '六',
  'seven': '七',
  'eight': '八',
  'nine': '九',
  'ten': '十',
  'hundred': '百',
  'thousand': '千',
  'first': '第一',
  'second': '第二',
  'third': '第三',
  'big': '大的',
  'small': '小的',
  'long': '长的',
  'short': '短的；矮的',
  'tall': '高的',
  'high': '高的',
  'low': '低的',
  'new': '新的',
  'old': '旧的；老的',
  'young': '年轻的',
  'good': '好的',
  'bad': '坏的',
  'nice': '好的；漂亮的',
  'beautiful': '美丽的',
  'pretty': '漂亮的',
  'ugly': '丑陋的',
  'happy': '快乐的',
  'sad': '悲伤的',
  'angry': '生气的',
  'tired': '疲倦的',
  'hungry': '饥饿的',
  'thirsty': '口渴的',
  'sick': '生病的',
  'healthy': '健康的',
  'strong': '强壮的',
  'weak': '虚弱的',
  'fast': '快的',
  'slow': '慢的',
  'easy': '容易的',
  'hard': '困难的；硬的',
  'difficult': '困难的',
  'simple': '简单的',
  'clean': '干净的',
  'dirty': '脏的',
  'right': '正确的；右边',
  'wrong': '错误的',
  'left': '左边',
  'up': '向上',
  'down': '向下',
  'in': '在...里面',
  'out': '在...外面',
  'on': '在...上面',
  'under': '在...下面',
  'near': '附近',
  'far': '远的',
  'here': '这里',
  'there': '那里',
  'where': '哪里',
  'when': '什么时候',
  'what': '什么',
  'who': '谁',
  'why': '为什么',
  'how': '怎样',
  'go': '去',
  'come': '来',
  'walk': '走',
  'run': '跑',
  'jump': '跳',
  'swim': '游泳',
  'fly': '飞',
  'sit': '坐',
  'stand': '站',
  'sleep': '睡觉',
  'wake': '醒来',
  'get': '得到',
  'give': '给',
  'take': '拿',
  'put': '放',
  'make': '制作',
  'do': '做',
  'have': '有',
  'see': '看见',
  'look': '看',
  'hear': '听见',
  'listen': '听',
  'say': '说',
  'speak': '说话',
  'talk': '谈话',
  'tell': '告诉',
  'ask': '问',
  'answer': '回答',
  'think': '想',
  'know': '知道',
  'learn': '学习',
  'study': '学习',
  'teach': '教',
  'help': '帮助',
  'work': '工作',
  'play': '玩',
  'like': '喜欢',
  'love': '爱',
  'want': '想要',
  'need': '需要',
  'use': '使用',
  'try': '尝试',
  'start': '开始',
  'stop': '停止',
  'begin': '开始',
  'end': '结束',
  'open': '打开',
  'close': '关闭',
  'turn': '转',
  'move': '移动',
  'bring': '带来',
  'carry': '携带',
  'hold': '握住',
  'keep': '保持',
  'find': '找到',
  'lose': '丢失',
  'buy': '买',
  'sell': '卖',
  'pay': '付款',
  'spend': '花费',
  'save': '节省；保存',
  'wait': '等待',
  'hope': '希望',
  'wish': '希望',
  'remember': '记住',
  'forget': '忘记',
  'believe': '相信',
  'feel': '感觉',
  'touch': '触摸',
  'smell': '闻',
  'taste': '尝',
  'body': '身体',
  'head': '头',
  'face': '脸',
  'eye': '眼睛',
  'ear': '耳朵',
  'nose': '鼻子',
  'mouth': '嘴',
  'tooth': '牙齿',
  'teeth': '牙齿（复数）',
  'hair': '头发',
  'hand': '手',
  'finger': '手指',
  'arm': '手臂',
  'leg': '腿',
  'foot': '脚',
  'feet': '脚（复数）',
  'heart': '心脏',
  'clothes': '衣服',
  'shirt': '衬衫',
  'pants': '裤子',
  'dress': '连衣裙',
  'coat': '外套',
  'hat': '帽子',
  'shoe': '鞋子',
  'shoes': '鞋子（复数）',
  'sock': '袜子',
  'bag': '包',
  'car': '汽车',
  'bus': '公共汽车',
  'train': '火车',
  'plane': '飞机',
  'bike': '自行车',
  'boat': '船',
  'ship': '轮船',
  'road': '路',
  'street': '街道',
  'city': '城市',
  'town': '城镇',
  'country': '国家；乡村',
  'world': '世界',
  'map': '地图',
  'place': '地方',
  'shop': '商店',
  'store': '商店',
  'market': '市场',
  'hospital': '医院',
  'library': '图书馆',
  'museum': '博物馆',
  'zoo': '动物园',
  'cinema': '电影院',
  'restaurant': '餐厅',
  'hotel': '酒店',
  'bank': '银行',
  'office': '办公室',
  'factory': '工厂',
  'farm': '农场',
  'garden': '花园',
  'mountain': '山',
  'river': '河',
  'lake': '湖',
  'sea': '海',
  'ocean': '海洋',
  'beach': '海滩',
  'island': '岛',
  'forest': '森林',
  'thing': '东西',
  'something': '某物',
  'nothing': '没有东西',
  'everything': '一切',
  'someone': '某人',
  'anyone': '任何人',
  'everyone': '每个人',
  'nobody': '没有人',
  'money': '钱',
  'price': '价格',
  'cheap': '便宜的',
  'expensive': '昂贵的',
  'free': '免费的；自由的',
  'problem': '问题',
  'question': '问题',
  'idea': '想法',
  'plan': '计划',
  'way': '方法；路',
  'part': '部分',
  'kind': '种类；善良的',
  'type': '类型',
  'example': '例子',
  'reason': '原因',
  'result': '结果',
  'fact': '事实',
  'truth': '真相',
  'story': '故事',
  'news': '新闻',
  'information': '信息',
  'word': '单词',
  'letter': '字母；信',
  'sentence': '句子',
  'page': '页',
  'picture': '图片',
  'photo': '照片',
  'movie': '电影',
  'music': '音乐',
  'song': '歌曲',
  'dance': '跳舞',
  'art': '艺术',
  'sport': '运动',
  'ball': '球',
  'team': '团队',
  'win': '赢',
  'lose': '输',
  'computer': '电脑',
  'phone': '电话',
  'television': '电视',
  'radio': '收音机',
  'internet': '互联网',
  'email': '电子邮件',
  'message': '消息',
  'call': '打电话；叫',
  'meet': '遇见',
  'visit': '参观；拜访',
  'travel': '旅行',
  'trip': '旅行',
  'vacation': '假期',
  'holiday': '假日',
  'party': '派对',
  'gift': '礼物',
  'present': '礼物；现在',
  'surprise': '惊喜',
  'special': '特别的',
  'important': '重要的',
  'interesting': '有趣的',
  'boring': '无聊的',
  'exciting': '令人兴奋的',
  'funny': '有趣的',
  'serious': '严肃的',
  'careful': '小心的',
  'dangerous': '危险的',
  'safe': '安全的',
  'possible': '可能的',
  'impossible': '不可能的',
  'real': '真实的',
  'true': '真的',
  'false': '假的',
  'same': '相同的',
  'different': '不同的',
  'other': '其他的',
  'another': '另一个',
  'own': '自己的',
  'only': '唯一的；只',
  'also': '也',
  'too': '也；太',
  'very': '非常',
  'really': '真的',
  'quite': '相当',
  'almost': '几乎',
  'about': '关于；大约',
  'around': '周围',
  'between': '在...之间',
  'among': '在...之中',
  'through': '通过',
  'across': '穿过',
  'along': '沿着',
  'against': '反对',
  'during': '在...期间',
  'before': '在...之前',
  'after': '在...之后',
  'since': '自从',
  'until': '直到',
  'while': '当...时候',
  'if': '如果',
  'because': '因为',
  'so': '所以',
  'but': '但是',
  'and': '和',
  'or': '或者',
  'than': '比',
  'as': '作为；像',
  'like': '像；喜欢',
  'with': '和...一起',
  'without': '没有',
  'for': '为了',
  'from': '从',
  'to': '到',
  'of': '的',
  'by': '通过',
  'at': '在',
  'this': '这个',
  'that': '那个',
  'these': '这些',
  'those': '那些',
  'my': '我的',
  'your': '你的',
  'his': '他的',
  'her': '她的',
  'its': '它的',
  'our': '我们的',
  'their': '他们的',
  'I': '我',
  'you': '你',
  'he': '他',
  'she': '她',
  'it': '它',
  'we': '我们',
  'they': '他们',
  'me': '我（宾格）',
  'him': '他（宾格）',
  'us': '我们（宾格）',
  'them': '他们（宾格）',
  'myself': '我自己',
  'yourself': '你自己',
  'himself': '他自己',
  'herself': '她自己',
  'itself': '它自己',
  'ourselves': '我们自己',
  'themselves': '他们自己',
  'yes': '是',
  'no': '不',
  'not': '不',
  'please': '请',
  'thank': '感谢',
  'sorry': '对不起',
  'hello': '你好',
  'goodbye': '再见',
  'welcome': '欢迎',
  'excuse': '原谅',
  'maybe': '也许',
  'perhaps': '也许',
  'certainly': '当然',
  'probably': '可能',
  'usually': '通常',
  'always': '总是',
  'often': '经常',
  'sometimes': '有时',
  'never': '从不',
  'again': '再次',
  'still': '仍然',
  'already': '已经',
  'yet': '还',
  'just': '刚刚；只是',
  'soon': '很快',
  'now': '现在',
  'then': '然后',
  'later': '后来',
  'early': '早的',
  'late': '晚的',
  'ago': '以前',
  'ever': '曾经',
  'once': '一次',
  'twice': '两次',
  'many': '许多',
  'much': '许多',
  'more': '更多',
  'most': '最多',
  'few': '少数',
  'little': '少；小',
  'less': '更少',
  'least': '最少',
  'some': '一些',
  'any': '任何',
  'all': '所有',
  'both': '两者都',
  'each': '每个',
  'every': '每个',
  'either': '任一',
  'neither': '两者都不',
  'enough': '足够',
  'such': '如此',
  'whole': '整个',
  'half': '一半',
  'several': '几个',
  'able': '能够',
  'sure': '确定的',
  'ready': '准备好的',
  'busy': '忙碌的',
  'full': '满的',
  'empty': '空的',
  'rich': '富有的',
  'poor': '贫穷的',
  'bright': '明亮的',
  'dark': '黑暗的',
  'light': '光；轻的',
  'heavy': '重的',
  'thick': '厚的',
  'thin': '薄的',
  'wide': '宽的',
  'narrow': '窄的',
  'deep': '深的',
  'shallow': '浅的',
  'soft': '软的',
  'hard': '硬的',
  'wet': '湿的',
  'dry': '干的',
  'hot': '热的',
  'warm': '温暖的',
  'cool': '凉爽的',
  'cold': '冷的',
  'fresh': '新鲜的',
  'sweet': '甜的',
  'sour': '酸的',
  'bitter': '苦的',
  'salty': '咸的',
  'spicy': '辣的',
  'loud': '大声的',
  'quiet': '安静的',
  'noisy': '吵闹的',
  'silent': '沉默的',
  'smooth': '光滑的',
  'rough': '粗糙的',
  'sharp': '锋利的',
  'dull': '钝的',
  'round': '圆的',
  'square': '方形的',
  'straight': '直的',
  'curved': '弯曲的',
  'flat': '平的',
  'main': '主要的',
  'common': '常见的',
  'rare': '稀有的',
  'popular': '流行的',
  'famous': '著名的',
  'normal': '正常的',
  'strange': '奇怪的',
  'natural': '自然的',
  'perfect': '完美的',
  'wonderful': '精彩的',
  'terrible': '可怕的',
  'awful': '糟糕的',
  'excellent': '优秀的',
  'great': '伟大的',
  'fine': '好的',
  'okay': '好的',
  'well': '好地',
  'badly': '糟糕地',
  'quickly': '快速地',
  'slowly': '慢慢地',
  'carefully': '仔细地',
  'easily': '容易地',
  'hardly': '几乎不',
  'finally': '最终',
  'suddenly': '突然',
  'recently': '最近',
  'especially': '特别',
  'actually': '实际上',
  'exactly': '确切地',
  'simply': '简单地',
  'clearly': '清楚地',
  'completely': '完全地',
  'directly': '直接地',
  'immediately': '立即',
  'together': '一起',
  'alone': '独自',
  'away': '离开',
  'back': '回来',
  'forward': '向前',
  'inside': '里面',
  'outside': '外面',
  'above': '在...上方',
  'below': '在...下方',
  'beside': '在...旁边',
  'behind': '在...后面',
  'front': '前面',
  'side': '边',
  'middle': '中间',
  'top': '顶部',
  'bottom': '底部',
  'corner': '角落',
  'edge': '边缘',
  'center': '中心',
  'surface': '表面',
  'area': '区域',
  'space': '空间',
  'size': '大小',
  'shape': '形状',
  'line': '线',
  'point': '点',
  'circle': '圆',
  'cross': '十字；穿过',
  'mark': '标记',
  'sign': '标志',
  'symbol': '符号',
  'note': '笔记；注意',
  'list': '列表',
  'group': '组',
  'pair': '一对',
  'set': '一套',
  'piece': '片；件',
  'bit': '一点',
  'lot': '许多',
  'rest': '休息；其余',
  'whole': '整个',
  'total': '总共',
  'average': '平均',
  'single': '单一的',
  'double': '双倍的',
  'extra': '额外的',
  'basic': '基本的',
  'general': '一般的',
  'public': '公共的',
  'private': '私人的',
  'personal': '个人的',
  'social': '社会的',
  'local': '当地的',
  'national': '国家的',
  'international': '国际的',
  'modern': '现代的',
  'ancient': '古代的',
  'future': '未来',
  'past': '过去',
  'present': '现在；礼物',
  'current': '当前的',
  'recent': '最近的',
  'next': '下一个',
  'last': '最后的',
  'previous': '以前的',
  'following': '接下来的',
  'final': '最终的',
  'original': '原始的',
  'traditional': '传统的',
  'official': '官方的',
  'professional': '专业的',
  'medical': '医学的',
  'physical': '物理的；身体的',
  'mental': '精神的',
  'political': '政治的',
  'economic': '经济的',
  'cultural': '文化的',
  'educational': '教育的',
  'environmental': '环境的',
  'scientific': '科学的',
  'technical': '技术的',
  'legal': '法律的',
  'military': '军事的',
  'religious': '宗教的',
  'historical': '历史的',
  'artistic': '艺术的',
  'musical': '音乐的',
  'literary': '文学的',
  'dramatic': '戏剧性的',
  'romantic': '浪漫的',
  'classic': '经典的',
  'creative': '创造性的',
  'active': '活跃的',
  'passive': '被动的',
  'positive': '积极的',
  'negative': '消极的',
  'effective': '有效的',
  'successful': '成功的',
  'powerful': '强大的',
  'useful': '有用的',
  'helpful': '有帮助的',
  'careful': '小心的',
  'hopeful': '充满希望的',
  'peaceful': '和平的',
  'cheerful': '快乐的',
  'thankful': '感激的',
  'painful': '痛苦的',
  'harmful': '有害的',
  'fearful': '害怕的',
  'doubtful': '怀疑的',
  'wonderful': '精彩的',
  'beautiful': '美丽的',
  'colorful': '多彩的',
  'meaningful': '有意义的',
  'careless': '粗心的',
  'homeless': '无家可归的',
  'hopeless': '绝望的',
  'useless': '无用的',
  'endless': '无尽的',
  'wireless': '无线的',
  'countless': '无数的',
  'priceless': '无价的',
  'speechless': '无言的',
  'breathless': '气喘吁吁的',
  'restless': '不安的',
  'sleepless': '失眠的',
  'cloudless': '无云的',
  'harmless': '无害的',
  'painless': '无痛的',
  'fearless': '无畏的',
  'doubtless': '无疑的'
};

// 读取词库文件
const wordsPath = join(__dirname, '..', 'public', 'words', 'grade3-400.json');
const words = JSON.parse(fs.readFileSync(wordsPath, 'utf-8'));

// 添加中文翻译
let translatedCount = 0;
const updatedWords = words.map(word => {
  const wordLower = word.word.toLowerCase();
  if (translations[wordLower]) {
    translatedCount++;
    return {
      ...word,
      definition_cn: translations[wordLower]
    };
  }
  return word;
});

// 保存更新后的词库
fs.writeFileSync(wordsPath, JSON.stringify(updatedWords, null, 2));

console.log(`已处理 ${words.length} 个单词`);
console.log(`已添加中文翻译 ${translatedCount} 个`);
console.log(`未翻译 ${words.length - translatedCount} 个`);

// 输出未翻译的单词
const untranslated = updatedWords.filter(w => !w.definition_cn).map(w => w.word);
if (untranslated.length > 0) {
  console.log('\n未翻译的单词:');
  console.log(untranslated.join(', '));
}
